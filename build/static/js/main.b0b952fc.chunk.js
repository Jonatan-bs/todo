(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{24:function(e,t,a){e.exports=a(45)},29:function(e,t,a){},30:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){e.exports=a.p+"static/media/x.2a219365.svg"},41:function(e,t,a){e.exports=a.p+"static/media/arrow.1f3dec2b.svg"},42:function(e,t,a){e.exports=a.p+"static/media/clock.25f243db.svg"},43:function(e,t,a){e.exports=a.p+"static/media/checked.67b30304.svg"},44:function(e,t,a){e.exports=a.p+"static/media/logo.12433552.svg"},45:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),r=a(21),i=a.n(r),l=(a(29),a(2)),s=a(7),c=a(14),d=a(3),p=a(4),u=(a(30),a(12)),m=a(11),h=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={email:"",password:""},e.setValue=function(t){var a=e.state;a[t.target.name]=t.target.value,e.setState(a)},e.login=function(){var t,a=document.querySelector(".popup").querySelectorAll("input"),o=Object(u.a)(a);try{for(o.s();!(t=o.n()).done;){var n=t.value;if(n.reportValidity(),!n.checkValidity())return}}catch(r){o.e(r)}finally{o.f()}fetch("http://localhost:3000/user/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.state.email,password:e.state.password})}).then((function(e){return e.json()})).then((function(t){t.auth?e.props.updateState({auth:!0,firstname:t.user.firstname,todos:t.user.todo}):(e.setState({message:"wrong username or password"}),setTimeout((function(){e.setState({message:""})}),2e3))})).catch((function(e){return console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"overlay2"}),n.a.createElement("div",{id:"login",className:"popup"},n.a.createElement("div",{className:this.state.message?"message active":"message"},"Wrong username or password"),n.a.createElement("h2",null,"Login"),n.a.createElement("div",{className:"field"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"text",id:"email",name:"email",onChange:this.setValue,value:this.state.email})),n.a.createElement("div",{className:"field"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",onChange:this.setValue,value:this.state.password})),n.a.createElement("button",{onClick:this.login},"Log in"),n.a.createElement(m.b,{to:"/register"},n.a.createElement("p",{className:"secondButton"},"Register"))))}}]),a}(o.Component),f=(a(36),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={email:"",password:"",firstname:"",lastname:"",message:""},e.setValue=function(t){var a=e.state;a[t.target.name]=t.target.value,e.setState(a)},e.register=function(){var t,a=document.querySelector(".popup").querySelectorAll("input"),o=Object(u.a)(a);try{for(o.s();!(t=o.n()).done;){var n=t.value;if(n.reportValidity(),!n.checkValidity())return}}catch(r){o.e(r)}finally{o.f()}fetch("http://localhost:3000/user/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.state.email,password:e.state.password,firstname:e.state.firstname,lastname:e.state.lastname})}).then((function(e){return e.json()})).then((function(t){11e3===t.code?(e.setState({message:"wrong username or password"}),setTimeout((function(){e.setState({message:""})}),2e3)):e.props.updateState({auth:!0,todos:t.user.todo})})).catch((function(e){return console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"overlay2"}),n.a.createElement("div",{id:"register",className:"popup"},n.a.createElement("div",{className:this.state.message?"message active":"message"},"User already exist"),n.a.createElement("h1",null,"Register"),n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",name:"email",onChange:this.setValue,value:this.state.email,required:!0}),n.a.createElement("label",{htmlFor:"firstname"},"firstname"),n.a.createElement("input",{type:"text",id:"firstname",name:"firstname",onChange:this.setValue,value:this.state.firstname,required:!0}),n.a.createElement("label",{htmlFor:"lastname"},"lastname"),n.a.createElement("input",{type:"text",id:"lastname",name:"lastname",onChange:this.setValue,value:this.state.lastname,required:!0}),n.a.createElement("label",{htmlFor:"password"},"password"),n.a.createElement("input",{type:"password",id:"password",name:"password",onChange:this.setValue,value:this.state.password,required:!0}),n.a.createElement("button",{onClick:this.register},"Register"),n.a.createElement(m.b,{to:"/login"},n.a.createElement("p",{className:"secondButton"},"Login"))))}}]),a}(o.Component)),E=(a(37),a(18)),v=(a(38),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={todo:{title:"",description:"",priority:0,deadlineDate:"",deadlineTime:""},message:""},e.componentDidMount=function(){if(e.props.activeTodo){var t=e.props.activeTodo;if(t.deadlineDate){var a=new Date(t.deadlineDate),o=("0"+a.getDate()).slice(-2),n=("0"+(a.getMonth()+1)).slice(-2),r=a.getFullYear();t.deadlineDate=r+"-"+n+"-"+o}var i={title:t.title,description:t.description,priority:t.priority,deadlineDate:t.deadlineDate?t.deadlineDate:"",deadlineTime:t.deadlineTime};e.setState({todo:i})}},e.getValue=function(t){var a=Object(E.a)({},e.state.todo),o=t.target.value;a[t.target.name]=o,e.setState({todo:a})},e.setValPrio=function(t){var a=Object(E.a)({},e.state.todo),o=t.target.value;a.priority=Number(o),e.setState({todo:a})},e.updateTodo=function(){var t=e.state.todo,a=e.props.activeTodo._id;fetch("http://localhost:3000/todo/update",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({todo:t,todoID:a})}).then((function(e){return e.json()})).then((function(t){t.success&&(e.props.setTodos(t.todo),e.props.todoPop(!1)())})).catch((function(e){return console.log(e)}))},e.deleteTodo=function(){var t=e.props.activeTodo._id;fetch("http://localhost:3000/todo/delete",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({todoID:t})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.success&&(e.props.setTodos(t.todo),e.props.todoPop(!1)())})).catch((function(e){return console.log(e)}))},e.addTodo=function(){var t,a=document.querySelector(".popup").querySelectorAll("input"),o=Object(u.a)(a);try{for(o.s();!(t=o.n()).done;){var n=t.value;if(n.reportValidity(),!n.checkValidity())return}}catch(i){o.e(i)}finally{o.f()}var r=e.state.todo;fetch("http://localhost:3000/todo/create",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({todo:r})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.success&&(e.props.setTodos(t.todo),e.props.todoPop(!1)())})).catch((function(e){return console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"overlay",onClick:this.props.todoPop(!1)}),n.a.createElement("div",{id:"createTodo",className:"popup"},n.a.createElement("div",{className:"field"},n.a.createElement("label",{htmlFor:"todoTitle"},"Title"),n.a.createElement("input",{id:"todoTitle",type:"text",name:"title",value:this.state.todo.title,onChange:this.getValue,required:!0})),n.a.createElement("div",{className:"field"},n.a.createElement("label",{htmlFor:"todoDescription"},"Description"),n.a.createElement("textarea",{className:"editable",id:"todoDescription",type:"text",name:"description",value:this.state.todo.description,onChange:this.getValue})),n.a.createElement("div",{className:"field "},n.a.createElement("p",null,"Priority"),n.a.createElement("div",{className:"priority"},n.a.createElement("input",{id:"prio1",name:"todoPriority",type:"radio",value:"0",checked:0===this.state.todo.priority,onChange:this.setValPrio}),n.a.createElement("label",{htmlFor:"prio1"}),n.a.createElement("input",{id:"prio2",name:"todoPriority",type:"radio",value:"1",checked:1===this.state.todo.priority,onChange:this.setValPrio}),n.a.createElement("label",{htmlFor:"prio2"}),n.a.createElement("input",{id:"prio3",name:"todoPriority",type:"radio",value:"2",checked:2===this.state.todo.priority,onChange:this.setValPrio}),n.a.createElement("label",{htmlFor:"prio3"}),n.a.createElement("input",{id:"prio4",name:"todoPriority",type:"radio",value:"3",checked:3===this.state.todo.priority,onChange:this.setValPrio}),n.a.createElement("label",{htmlFor:"prio4"}))),n.a.createElement("p",null,"Deadline"),n.a.createElement("div",{className:"field dateTime"},n.a.createElement("div",{className:"date"},n.a.createElement("label",{htmlFor:"todoDeadLine"},"Date"),n.a.createElement("input",{id:"todoDeadLine",type:"date",name:"deadlineDate",value:this.state.todo.deadlineDate,onChange:this.getValue})),n.a.createElement("div",{className:"time"},n.a.createElement("label",{htmlFor:"todoDeadLineTime"},"Time"),n.a.createElement("input",{id:"todoDeadLine",name:"deadlineTime",type:"time",value:this.state.todo.deadlineTime,onChange:this.getValue}))),"create"===this.props.action?n.a.createElement("button",{id:"addTodo",onClick:this.addTodo},"Add todo"):null,"edit"===this.props.action?n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{id:"editTodo",onClick:this.updateTodo},"Update todo"),n.a.createElement("button",{id:"deleteTodo",onClick:this.deleteTodo},"Delete todo")):null))}}]),a}(o.Component)),g=(a(39),function(e){Object(p.a)(o,e);var t=Object(d.a)(o);function o(){var e;Object(l.a)(this,o);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={},e.logout=function(){fetch("http://localhost:3000/user/logout",{method:"post"}).then((function(e){e.json()})).then((function(t){e.props.setAuth(!1)})).catch((function(e){return console.log(e)}))},e.render=function(){return n.a.createElement("div",{id:"topMenu"},n.a.createElement("div",{id:"addTodoWrap"},n.a.createElement("div",{id:"addTodo"},n.a.createElement("img",{className:"addButton",src:a(40),alt:"Add todo",onClick:e.props.todoPop("create")})),e.props.todos.length?null:n.a.createElement("div",{id:"addFirst"},n.a.createElement("img",{src:a(41),alt:"Add todo"}))),n.a.createElement("p",{id:"logout",onClick:e.logout},"Log out"))},e}return o}(o.Component)),y=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";e.sort((function(o,n){switch("updatedAt"===t&&(o[t]=new Date(o[t]),o[t]=o[t].getTime(),n[t]=new Date(n[t]),n[t]=n[t].getTime()),a){case"asc":return o[t]-n[t];case"desc":return n[t]-o[t];default:return e}}))},b=function(e){if(!e)return"";var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},T=function(e){Object(p.a)(o,e);var t=Object(d.a)(o);function o(){return Object(l.a)(this,o),t.apply(this,arguments)}return Object(s.a)(o,[{key:"render",value:function(){var e=this;return this.props.type.map((function(t,o){return n.a.createElement(n.a.Fragment,{key:o},n.a.createElement("div",{className:"topElms"},n.a.createElement("p",{className:"updateDate"},e.props.changePrefix+": "+b(t.updatedAt)),"Updated"===e.props.changePrefix?n.a.createElement("p",{className:"drop",onClick:e.props.dropEvent(t._id)},"Drop"):null,"Done"===e.props.changePrefix?n.a.createElement("p",{className:"drop",onClick:e.props.dropEvent(t._id)},"Drop"):null,"Dropped"===e.props.changePrefix?n.a.createElement("p",{className:"drop",onClick:e.props.dropEvent(t._id)},"Reset"):null),n.a.createElement("li",{key:o,onClick:"Updated"===e.props.changePrefix?e.props.todoPop("edit",t):null},t.deadlineDate||t.deadlineTime?n.a.createElement("div",{className:"deadline"},n.a.createElement("img",{src:a(42),alt:"Deadline"}),n.a.createElement("p",{className:"date"},b(t.deadlineDate)),n.a.createElement("p",{className:"time"},t.deadlineTime)):null,"Dropped"!==e.props.changePrefix?n.a.createElement("div",{className:"done"},n.a.createElement("input",{className:"nopop",id:"done",type:"checkbox",checked:t.done,readOnly:!0}),n.a.createElement("label",{className:"nopop",htmlFor:"done",onClick:e.props.doneEvent(t._id)},n.a.createElement("img",{alt:"checked",className:"nopop",src:a(43),onClick:e.props.doneEvent(t._id)}))):null,n.a.createElement("span",{className:"priority priority"+t.priority}),n.a.createElement("div",{className:"content"},n.a.createElement("h3",{className:"title"},t.title),n.a.createElement("p",{className:"description"},t.description))))}))}}]),o}(o.Component),N=function(e){Object(p.a)(o,e);var t=Object(d.a)(o);function o(){var e;Object(l.a)(this,o);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={todoPop:!1,todos:[],activeTodo:null,active:[],dropped:[],done:[]},e.doneEvent=function(t){return function(a){a.target===a.currentTarget&&fetch("http://localhost:3000/todo/done",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({todoID:t})}).then((function(e){return e.json()})).then((function(t){e.props.setTodos(t.todo)})).catch((function(e){return console.log(e)}))}},e.dropEvent=function(t){return function(a){a.target===a.currentTarget&&fetch("http://localhost:3000/todo/drop",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({todoID:t})}).then((function(e){return e.json()})).then((function(t){e.props.setTodos(t.todo)})).catch((function(e){return console.log(e)}))}},e.componentDidUpdate=function(t){if(t!==e.props){var a=e.props.todos,o=a.filter((function(e){return!1===e.done&&!1===e.dropped})),n=a.filter((function(e){return e.dropped})),r=a.filter((function(e){return e.done}));e.setState({todos:a,done:r,dropped:n,active:o})}},e.todoPop=function(t,a){return function(o){o&&o.target.classList.contains("nopop")||e.setState({todoPop:t,activeTodo:a})}},e.render=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(g,{setAuth:e.props.setAuth,todoPop:e.todoPop,todos:e.state.todos}),e.state.todoPop?n.a.createElement(v,{todoPop:e.todoPop,setTodos:e.props.setTodos,action:e.state.todoPop,activeTodo:e.state.activeTodo}):null,e.state.todos.length>0?n.a.createElement("div",{id:"todoWrap"},e.state.active.length>0?n.a.createElement("div",{className:"activeTodos todoSection"},n.a.createElement("ul",{className:"todoUl"},n.a.createElement("h4",{className:"todoGroupTitle"},"Active Todos"),n.a.createElement(T,{type:e.state.active,todoPop:e.todoPop,doneEvent:e.doneEvent,dropEvent:e.dropEvent,changePrefix:"Updated"}))):null,e.state.done.length>0?n.a.createElement("div",{className:"doneTodos todoSection"},n.a.createElement("ul",{className:"todoUl"},n.a.createElement("h4",{className:"todoGroupTitle"},"Done"),n.a.createElement(T,{type:e.state.done,todoPop:e.todoPop,doneEvent:e.doneEvent,dropEvent:e.dropEvent,changePrefix:"Done"}))):null,e.state.dropped.length>0?n.a.createElement("div",{className:"droppedTodos todoSection"},n.a.createElement("ul",{className:"todoUl"},n.a.createElement("h4",{className:"todoGroupTitle"},"Dropped"),n.a.createElement(T,{type:e.state.dropped,todoPop:e.todoPop,doneEvent:e.doneEvent,dropEvent:e.dropEvent,changePrefix:"Dropped"}))):null):n.a.createElement("div",{className:"welcome",onClick:e.todoPop("create")},n.a.createElement("h1",null,"Welcome to"),n.a.createElement("img",{src:a(44),alt:"Deadline"}),n.a.createElement("p",null,"Add your first Todo, in the top left corner ",n.a.createElement("br",null)," or click HERE"," ")))},e}return Object(s.a)(o,[{key:"componentDidMount",value:function(){var e=this.props.todos,t=e.filter((function(e){return!1===e.done&&!1===e.dropped})),a=e.filter((function(e){return e.dropped})),o=e.filter((function(e){return e.done}));this.setState({todos:e,done:o,dropped:a,active:t})}}]),o}(o.Component),j=a(9),D=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={auth:"notset"},e.setAuth=function(t){e.setState({auth:t,todos:[],firstname:""})},e.MainPage=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("section",null,n.a.createElement(N,{todos:e.state.todos,setTodos:e.setTodos.bind(Object(c.a)(e)),setAuth:e.setAuth})))},e.setName=function(t){e.setState({firstname:t})},e.updateState=function(t){e.setState(t)},e.setTodos=function(t){y(t,"updatedAt","desc"),y(t,"done","asc"),e.setState({todos:t})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:3000/user/auth",{method:"post"}).then((function(e){return e.json()})).then((function(t){var a=t.auth,o="",n=[];t.user&&(o=t.user.firstname,n=t.user.todo),e.setState({auth:a,firstname:o,todos:n})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return"notset"===this.state.auth?n.a.createElement("p",null,"Loading"):n.a.createElement(m.a,null,n.a.createElement(j.d,null,n.a.createElement(j.b,{exact:!0,path:"/login",render:function(){return e.state.auth?n.a.createElement(j.a,{to:"/"}):n.a.createElement(h,{updateState:e.updateState.bind(e)})}}),n.a.createElement(j.b,{exact:!0,path:"/register",render:function(){return e.state.auth?n.a.createElement(j.a,{to:"/"}):n.a.createElement(f,{updateState:e.updateState.bind(e)})}}),n.a.createElement(j.b,{exact:!0,render:function(){return e.state.auth?n.a.createElement(e.MainPage,null):n.a.createElement(j.a,{to:"/login"})}}),n.a.createElement(j.b,{component:this.MainPage})))}}]),a}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.b0b952fc.chunk.js.map